{"ast":null,"code":"var _jsxFileName = \"/media/suvradeep/My Profile/edu/Projects/Core React/FullStack/SocialFrontend/src/Components/Post.tsx\";\nimport React, { Component } from \"react\";\nimport \"../Style/Style.css\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Post extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      postData: [{\n        _id: \"\",\n        title: \"\",\n        imgUrl: \"\",\n        date: \"\",\n        description: \"\"\n      }],\n      editData: {\n        _id: \"\",\n        title: \"\",\n        imgUrl: \"\",\n        date: \"\",\n        description: \"\"\n      },\n      loading: false,\n      submitted: false,\n      token: \"\",\n      modalMsg: \"\"\n    };\n    this.onHandleChange = this.onHandleChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchAllData();\n  }\n\n  fetchAllData() {\n    const token = localStorage.getItem(\"token\");\n    axios.get(\"http://localhost:8080/post/home\", {\n      headers: {\n        \"auth-token\": `${token}`\n      }\n    }).then(res => {\n      this.setState({\n        postData: res.data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  deletePost(id) {\n    axios.delete(\"http://localhost:8080/post/\" + id).then(res => {\n      this.fetchAllData();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  editCliked(post) {\n    this.setState({\n      editData: {\n        _id: post._id,\n        title: post.title,\n        imgUrl: post.imgUrl,\n        date: post.date,\n        description: post.description\n      },\n      modalMsg: \"\"\n    });\n  }\n\n  onHandleChange(e) {\n    this.setState(preState => ({\n      editData: { ...preState.editData,\n        [e.target.name]: e.target.value\n      }\n    }));\n  }\n\n  onSubmit(id) {\n    this.setState({\n      loading: true,\n      submitted: true\n    });\n    axios.patch(\"http://localhost:8080/post/\" + id, {\n      title: this.state.editData.title,\n      description: this.state.editData.description,\n      date: this.state.editData.date,\n      imgUrl: this.state.editData.imgUrl\n    }).then(res => {\n      this.fetchAllData();\n      this.setState({\n        loading: false,\n        modalMsg: \"Post successfylly updated.\"\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: [this.state.postData.length > 0 ? this.state.postData.map((post, key) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"imgDiv\",\n                src: post.imgUrl,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"description\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"jumbotron\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"date mt-3\",\n                    children: post.date.split(\"T\")[0]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"display-6 mt-3\",\n                    children: post.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\" \", post.description]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"btnDiv\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-secondary\",\n                  type: \"button\",\n                  \"data-toggle\": \"modal\",\n                  \"data-target\": \"#exampleModalCenter\",\n                  onClick: () => this.editCliked(post),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-6 mb-5\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"btnDiv\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  onClick: () => this.deletePost(post._id),\n                  type: \"button\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 15\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Create your first post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal fade\",\n        id: \"exampleModalCenter\",\n        role: \"dialog\",\n        \"aria-labelledby\": \"exampleModalCenterTitle\",\n        \"aria-hidden\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-dialog modal-dialog-centered\",\n          role: \"document\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"modal-title\",\n                id: \"exampleModalLongTitle\",\n                children: \"Edit your post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-body\",\n              children: [this.state.submitted ? this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner-border\",\n                  role: \"status\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"sr-only\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  textAlign: \"center\"\n                },\n                children: this.state.modalMsg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }, this) : null, /*#__PURE__*/_jsxDEV(\"form\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Title\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    name: \"title\",\n                    value: this.state.editData.title,\n                    onChange: this.onHandleChange,\n                    placeholder: \"Title\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Description\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"form-control\",\n                    name: \"description\",\n                    value: this.state.editData.description,\n                    onChange: this.onHandleChange,\n                    placeholder: \"Description\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Image URL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    name: \"imgUrl\",\n                    value: this.state.editData.imgUrl,\n                    onChange: this.onHandleChange,\n                    placeholder: \"Image URL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    name: \"date\",\n                    value: this.state.editData.date.split(\"T\")[0],\n                    onChange: this.onHandleChange,\n                    placeholder: \"Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                \"data-dismiss\": \"modal\",\n                children: \"Close\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => this.onSubmit(this.state.editData._id),\n                className: \"btn btn-primary\",\n                children: \"Save changes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/media/suvradeep/My Profile/edu/Projects/Core React/FullStack/SocialFrontend/src/Components/Post.tsx"],"names":["React","Component","axios","Post","constructor","props","state","postData","_id","title","imgUrl","date","description","editData","loading","submitted","token","modalMsg","onHandleChange","bind","onSubmit","componentDidMount","fetchAllData","localStorage","getItem","get","headers","then","res","setState","data","catch","err","console","log","deletePost","id","delete","editCliked","post","e","preState","target","name","value","patch","render","length","map","key","split","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../Style/Style.css\";\nimport axios from \"axios\";\n\ninterface State {\n  postData: {\n    _id: string;\n    title: string;\n    imgUrl: string;\n    date: string;\n    description: string;\n  }[];\n  editData: {\n    _id: string;\n    title: string;\n    imgUrl: string;\n    date: string;\n    description: string;\n  };\n  loading: boolean;\n  submitted: boolean;\n  token: string | null;\n  modalMsg: string;\n}\n\ninterface Props {}\n\nexport default class Post extends Component<Props, State> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      postData: [\n        {\n          _id: \"\",\n          title: \"\",\n          imgUrl: \"\",\n          date: \"\",\n          description: \"\",\n        },\n      ],\n      editData: {\n        _id: \"\",\n        title: \"\",\n        imgUrl: \"\",\n        date: \"\",\n        description: \"\",\n      },\n      loading: false,\n      submitted: false,\n      token: \"\",\n      modalMsg: \"\",\n    };\n\n    this.onHandleChange = this.onHandleChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchAllData();\n  }\n\n  fetchAllData() {\n    const token = localStorage.getItem(\"token\");\n    axios\n      .get(\"http://localhost:8080/post/home\", {\n        headers: {\n          \"auth-token\": `${token}`,\n        },\n      })\n      .then((res: any) => {\n        this.setState({ postData: res.data });\n      })\n      .catch((err: any) => {\n        console.log(err);\n      });\n  }\n\n  deletePost(id: string) {\n    axios\n      .delete(\"http://localhost:8080/post/\" + id)\n      .then((res: any) => {\n        this.fetchAllData();\n      })\n      .catch((err: any) => {\n        console.log(err);\n      });\n  }\n\n  editCliked(post: any) {\n    this.setState({\n      editData: {\n        _id: post._id,\n        title: post.title,\n        imgUrl: post.imgUrl,\n        date: post.date,\n        description: post.description,\n      },\n      modalMsg: \"\",\n    });\n  }\n\n  onHandleChange(e: any) {\n    this.setState((preState) => ({\n      editData: {\n        ...preState.editData,\n        [e.target.name]: e.target.value,\n      },\n    }));\n  }\n\n  onSubmit(id: any) {\n    this.setState({ loading: true, submitted: true });\n    axios\n      .patch(\"http://localhost:8080/post/\" + id, {\n        title: this.state.editData.title,\n        description: this.state.editData.description,\n        date: this.state.editData.date,\n        imgUrl: this.state.editData.imgUrl,\n      })\n      .then((res: any) => {\n        this.fetchAllData();\n        this.setState({\n          loading: false,\n          modalMsg: \"Post successfylly updated.\",\n        });\n      })\n      .catch((err: any) => {\n        console.log(err);\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"container-fluid\">\n        {/* Posts */}\n\n        {this.state.postData.length > 0 ? (\n          this.state.postData.map((post, key) => {\n            return (\n              <div key={key}>\n                <div className=\"row\">\n                  <div className=\"col-12\">\n                    <img className=\"imgDiv\" src={post.imgUrl} alt=\"\" />\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col-12\">\n                    <div className=\"description\">\n                      <div className=\"jumbotron\">\n                        <p className=\"date mt-3\">{post.date.split(\"T\")[0]}</p>\n                        <h3 className=\"display-6 mt-3\">{post.title}</h3>\n                        <p> {post.description}</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"row\">\n                  <div className=\"col-6\">\n                    <div className=\"btnDiv\">\n                      <button\n                        className=\"btn btn-secondary\"\n                        type=\"button\"\n                        data-toggle=\"modal\"\n                        data-target=\"#exampleModalCenter\"\n                        onClick={() => this.editCliked(post)}\n                      >\n                        Edit\n                      </button>\n                    </div>\n                  </div>\n                  <div className=\"col-6 mb-5\">\n                    <div className=\"btnDiv\">\n                      <button\n                        className=\"btn btn-danger\"\n                        onClick={() => this.deletePost(post._id)}\n                        type=\"button\"\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <h3>Create your first post</h3>\n        )}\n\n        {/* Modal */}\n\n        <div\n          className=\"modal fade\"\n          id=\"exampleModalCenter\"\n          role=\"dialog\"\n          aria-labelledby=\"exampleModalCenterTitle\"\n          aria-hidden=\"true\"\n        >\n          <div className=\"modal-dialog modal-dialog-centered\" role=\"document\">\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h5 className=\"modal-title\" id=\"exampleModalLongTitle\">\n                  Edit your post\n                </h5>\n              </div>\n              <div className=\"modal-body\">\n                {this.state.submitted ? (\n                  this.state.loading ? (\n                    <div className=\"d-flex justify-content-center\">\n                      <div className=\"spinner-border\" role=\"status\">\n                        <span className=\"sr-only\"></span>\n                      </div>\n                    </div>\n                  ) : (\n                    <p style={{ textAlign: \"center\" }}>{this.state.modalMsg}</p>\n                  )\n                ) : null}\n\n                <form>\n                  <div className=\"form-group\">\n                    <label>Title</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      name=\"title\"\n                      value={this.state.editData.title}\n                      onChange={this.onHandleChange}\n                      placeholder=\"Title\"\n                    />\n                  </div>\n                  <div className=\"form-group mt-2\">\n                    <label>Description</label>\n                    <textarea\n                      className=\"form-control\"\n                      name=\"description\"\n                      value={this.state.editData.description}\n                      onChange={this.onHandleChange}\n                      placeholder=\"Description\"\n                    />\n                  </div>\n                  <div className=\"form-group mt-2\">\n                    <label>Image URL</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      name=\"imgUrl\"\n                      value={this.state.editData.imgUrl}\n                      onChange={this.onHandleChange}\n                      placeholder=\"Image URL\"\n                    />\n                  </div>\n                  <div className=\"form-group mt-2\">\n                    <label>Date</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      name=\"date\"\n                      value={this.state.editData.date.split(\"T\")[0]}\n                      onChange={this.onHandleChange}\n                      placeholder=\"Date\"\n                    />\n                  </div>\n                </form>\n              </div>\n              <div className=\"modal-footer\">\n                <button\n                  type=\"button\"\n                  className=\"btn btn-secondary\"\n                  data-dismiss=\"modal\"\n                >\n                  Close\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => this.onSubmit(this.state.editData._id)}\n                  className=\"btn btn-primary\"\n                >\n                  Save changes\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}